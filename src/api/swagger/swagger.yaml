swagger: "2.0"
info:
  version: "0.0.1"
  title: taxter API
host: localhost
basePath: /1.0/
schemes:
  - http
  - https
consumes:
  - application/json
  - application/x-www-form-urlencoded
produces:
  - application/json
paths:
  /status:
    x-swagger-router-controller: status
    get:
      description: Returns container status.
      operationId: getStatus
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/StatusResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /clients:
    x-swagger-router-controller: feeds
    get:
      description: Returns all client from the cms.tbl_client
      operationId: getClients
      parameters:
        - name: search
          in: query
          description: Search terms.
          required: false
          type: string
        - name: limit
          in: query
          description: Limit number of results.
          required: false
          type: number
        - name: offset
          in: query
          description: Offset of filtered or natural items to return.
          required: false
          type: number
        - name: order
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: dir
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionResponseWithTotal"

        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /clients/{client}/products:
    x-swagger-router-controller: product
    get:
      description: Returns client total number of product from tbl_products
      operationId: getProducts
      parameters:
        - name: client
          in: path
          description: client name from cms
          required: true
          type: string
        - name: search
          in: query
          description: search products by pID and pName
          required: false
          type: string
        - name: type
          in: query
          description: types are active or inactive
          required: false
          type: string
        - name: feed
          in: query
          description: provides feed like wfm,nielsen,spins,local,iri
          required: false
          type: string
        - name: offset
          in: query
          description: declare offset
          required: false
          type: string
        - name: limit
          in: query
          description: set the limit of records
          required: false
          type: string
        - name: coverage
          in: query
          description: set the value of the product coverage which is YES or NO must pass the feed
          required: false
          type: string
        - name: order
          in: query
          description: set the order which ASC or DESC.
          required: false
          type: string
        - name: dir
          in: query
          description: set the dir.
          required: false
          type: string
        - name: country
          in: query
          description: pass the country which is US and CA
          required: false
          type: string

      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionResponseWithTotal"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /clients/{client}/retailers:
    x-swagger-router-controller: core
    get:
      description: Returns client total number of product from tbl_products
      operationId: getRetailers
      parameters:
        - name: client
          in: path
          description: client name from cms
          required: true
          type: string
        - name: search
          in: query
          description: declare offset
          required: false
          type: string
        - name: offset
          in: query
          description: declare offset
          required: false
          type: number
        - name: limit
          in: query
          description: set the limit of records
          required: false
          type: number
        - name: order
          in: query
          description: set the order which ASC or DESC.
          required: false
          type: string
        - name: dir
          in: query
          description: set the order which ASC or DESC.
          required: false
          type: string

      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /clients/{client}/products/search:
    x-swagger-router-controller: product-by
    get:
      description: Returns client total number of product from tbl_products
      operationId: getProductsBy
      parameters:
        - name: client
          in: path
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: by
          in: query
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: query
          in: query
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: offset
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: limit
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: order
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: dir
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string

      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionResponseWithTotal"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /feeds/products/{upc}:
    x-swagger-router-controller: feedProduct
    get:
      description: Returns client total number of product from tbl_products
      operationId: getClientsFeedProduct
      parameters:
        - name: search
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: client
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: upc
          in: path
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: feed
          in: query
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: offset
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: limit
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: coverage
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: order
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: dir
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: country
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string

      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/ObjectResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /clients/{client}/products/{upc}/stores:
    x-swagger-router-controller: product-store
    get:
      description: Returns client total Active stores for individual product. you must have to pass the query  search?='wfm','nielsen','spins'
      operationId: getProductStore
      parameters:
        - name: client
          in: path
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: upc
          in: path
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: feed
          in: query
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: search
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: order
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: dir
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: limit
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: offset
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: country
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionResponseWithTotal"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /clients/{client}/feeds:
    x-swagger-router-controller: feeds
    get:
      description: Returns client total of  active feeds
      operationId: getClientFeeds
      parameters:
        - name: client
          in: path
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: country
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionResponseWithTotalAndActiveFeed"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /clients/{client}/feedsStats:
    x-swagger-router-controller: FeedsStats
    get:
      description: Returns client total of  active feeds
      operationId: getClientFeedsStats
      parameters:
        - name: client
          in: path
          description: Client DB Name for Legacy Support
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionResponseWithTotalAndActiveStatsFeed"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /clients/{client}/feedProduct:
    x-swagger-router-controller: feed-product
    get:
      description: Returns client total of  active feeds
      operationId: getClientFeedproduct
      parameters:
        - name: client
          in: path
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: feed
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: country
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/ObjectResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /clients/{client}/feeds/stores:
    x-swagger-router-controller: cms-feed-stores
    get:
      description: Returns total of active spins stores for client.
      operationId: getClientsFeedStores
      parameters:
        - name: client
          in: path
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: feed
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: country
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: type
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/ObjectResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /clients/{client}/stores:
    x-swagger-router-controller: search-store
    get:
      description: Returns total of active nielsen stores for client.
      operationId: getClientsSearchStores
      parameters:
        - name: client
          in: path
          description: Search terms.
          required: true
          type: string
        - name: feed
          in: query
          description: Search terms.
          required: true
          type: string
        - name: search
          in: query
          description: Search terms.
          required: false
          type: string
        - name: limit
          in: query
          description: Limit number of results.
          required: false
          type: number
        - name: offset
          in: query
          description: Offset of filtered or natural items to return.
          required: false
          type: number
        - name: stores
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: order
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: group
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: dir
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: country
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: type
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionResponseWithTotal"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /clients/{client}/stores/{sID}/products:
    x-swagger-router-controller: store-product
    get:
      description: Returns total of active nielsen stores for client.
      operationId: getClientsStoresProduct
      parameters:
        - name: client
          in: path
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: sID
          in: path
          description: Client DB Name for Legacy Support
          required: true
          type: number
        - name: feed
          in: query
          description: Client DB Name for Legacy Support
          required: true
          type: string
        - name: search
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: limit
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: order
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: dir
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
        - name: offset
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string

      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionResponseWithTotalAndStoreName"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /core/stores:
    x-swagger-router-controller: stores
    get:
      description: Returns store collection
      operationId: getStores
      parameters:
        - name: client
          in: query
          description: Search terms.
          required: false
          type: string
        - name: search
          in: query
          description: Search terms.
          required: false
          type: string
        - name: limit
          in: query
          description: Limit number of results.
          required: false
          type: number
        - name: offset
          in: query
          description: Offset of filtered or natural items to return.
          required: false
          type: number
        - name: stores
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: order
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: group
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: feed
          in: query
          description: Comma delimited list of stores.
          required: true
          type: string
        - name: dir
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: country
          in: query
          description: Client DB Name for Legacy Support
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionResponseWithTotal"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /balance:
    x-swagger-router-controller: balance
    get:
      description: Returns all client from the cms.tbl_client
      operationId: getClinetsBalance
      parameters:
        - name: search
          in: query
          description: Search terms.
          required: false
          type: string
        - name: limit
          in: query
          description: Limit number of results.
          required: false
          type: number
        - name: offset
          in: query
          description: Offset of filtered or natural items to return.
          required: false
          type: number
        - name: order
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
        - name: dir
          in: query
          description: Comma delimited list of stores.
          required: false
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionResponseWithTotal"

        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /swagger:
    x-swagger-pipe: swagger_raw
definitions:
  CollectionResponseWithTotal:
    required:
      - timestamp
      - total
      - data
      - status
    properties:
      timestamp:
        type: string
      status:
        type: string
      total:
        type: number
      data:
        type: array
        items:
          - $ref: "#/definitions/ClientObject"
          - $ref: "#/definitions/ProductObject"
          - $ref: "#/definitions/StoreObject"
  CollectionResponseWithTotalAndActiveFeed:
    required:
      - timestamp
      - total
      - status
      - nielsenActive
      - spinsActive
      - iriActive
      - wfmActive
      - localActive
    properties:
      timestamp:
        type: string
      status:
        type: string
      total:
        type: number
      active:
        type: number
      spinsActive:
        type: number
      iriActive:
        type: number
      nielsenActive:
        type: number
      wfmActive:
        type: number
      localActive:
        type: number
        items:
          - $ref: "#/definitions/ClientObject"
          - $ref: "#/definitions/ProductObject"
          - $ref: "#/definitions/StoreObject"
  CollectionResponseWithTotalAndActiveStatsFeed:
    required:
      - timestamp
      - total
      - status
      - data
    properties:
      timestamp:
        type: string
      status:
        type: string
      total:
        type: number
      data:
        type: object
        properties:
          iriActive:
            $ref: "#/definitions/IriActive"
          nielsenActive:
            $ref: "#/definitions/NielsenActive"
          spinsActive:
            $ref: "#/definitions/SpinsActive"
          wfmActive:
            $ref: "#/definitions/WfmActive"
          localActive:
            $ref: "#/definitions/LocalActive"

  CollectionResponseWithTotalAndStoreName:
    required:
      - timestamp
      - total
      - data
      - status
    properties:
      timestamp:
        type: string
      status:
        type: string
      total:
        type: number
      storeDetail:
        type: array
        items:
          type: object
      data:
        type: array
        items:
          - $ref: "#/definitions/ClientObject"
          - $ref: "#/definitions/ProductObject"
          - $ref: "#/definitions/StoreObject"
  CollectionResponse:
    required:
      - timestamp
      - data
      - status
    properties:
      timestamp:
        type: string
      status:
        type: string
      data:
        type: array
        items:
          - $ref: "#/definitions/Store2Object"
  ObjectResponse:
    required:
      - timestamp
      - data
      - status
    properties:
      timestamp:
        type: string
      status:
        type: string
      data:
        type: object
        items:
          - $ref: "#/definitions/ClientObject"
          - $ref: "#/definitions/ProductObject"
          - $ref: "#/definitions/StoreObject"
  ArrayResponse:
    required:
      - timestamp
      - data
      - status
    properties:
      timestamp:
        type: string
      status:
        type: string
      data:
        type: array
        items:
          - $ref: "#/definitions/ClientObject"
          - $ref: "#/definitions/ProductObject"
          - $ref: "#/definitions/StoreObject"
  StatusResponse:
    required:
      - timestamp
      - data
    properties:
      timestamp:
        type: string
      data:
        type: string
  ErrorResponse:
    required:
      - timestamp
      - error
    properties:
      timestamp:
        type: string
      error:
        type: number
  ClientObject:
    properties:
      name:
        type: string
      clientCode:
        type: string
  SpinsActive:
    properties:
      feedActive:
        type: number
      total:
        type: number
      active:
        type: number
      coverage:
        type: number
      # totalStores:
      #   type: number
      # totalActiveStores:
      #   type: number

  NielsenActive:
    properties:
      feedActive:
        type: number
      total:
        type: number
      active:
        type: number
      coverage:
        type: number
  WfmActive:
    properties:
      feedActive:
        type: number
      total:
        type: number
      active:
        type: number
      coverage:
        type: number
  LocalActive:
    properties:
      feedActive:
        type: number
      total:
        type: number
      active:
        type: number
      coverage:
        type: number
  IriActive:
    properties:
      feedActive:
        type: number
      total:
        type: number
      active:
        type: number
      coverage:
        type: number
  ProductObject:
    properties:
      upc:
        type:
          - string
          - 'null'
      name:
        type:
          - string
          - 'null'
      desc:
        type:
          - string
          - 'null'
      spins:
        type:
          - string
          - 'null'
      iri:
        type:
          - string
          - 'null'
      wfm:
        type:
          - string
          - 'null'
      nielsen:
        type:
          - string
          - 'null'
      img:
        type:
          - string
          - 'null'
  StoreObject:
    properties:
      chain:
        type:
          - string
          - 'null'
      name:
        type:
          - string
          - 'null'
      address1:
        type: string
      city:
        type:
          - string
          - 'null'
      state:
        type:
          - string
          - 'null'
      zip:
        type:
          - string
          - 'null'
      country:
        type:
          - string
          - 'null'
      latitude:
        type:
          - string
          - 'null'
      longitude:
        type:
          - string
          - 'null'
      address2:
        type:
          - string
          - 'null'
      phone1:
        type:
          - string
          - 'null'
      phone2:
        type:
          - string
          - 'null'
      phoneType1:
        type:
          - string
          - 'null'
      phoneType2:
        type:
          - string
          - 'null'
      web:
        type:
          - string
          - 'null'
      category:
        type:
          - string
      id:
        type:
          - number
  Store2Object:
    properties:
      store_id:
        type:
          - number
  # GroupObject:
  #   properties:
  #     id:
  #       type:
  #         - number
